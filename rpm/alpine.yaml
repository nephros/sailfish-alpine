Name: alpine
Summary: "Text-based mail and news client. Includes patches by Eduardo Chappa"
Version: 2.25
Release: 4
URL: http://alpine.x10host.com/alpine/release/
Group: Applications
License: 'ASL 2.0'
Sources:
    - http://alpine.x10host.com/alpine/patches/%{name}-%{version}/%{name}-%{version}.tar.xz
    - http://www.alpine.x10host.com/%{name}/patches/%{name}-%{version}/all.patch.gz
    - pine.conf
    - pine.conf.fixed
Patches:
    - '%SOURCE1'
Description: |
    A free software email client developed at the University of Washington.

    Alpine is a rewrite of the Pine Message System that adds support for
    Unicode and other features. It is meant to be suitable for both
    inexperienced email users and the most demanding of power users.

    "Alpine" officially stands for Alternatively Licensed Program for Internet
    News and Email.

PkgBR:
    - aspell
PkgConfigBR:
    - ncurses
    - tinfo
    - libcrypto
    - libssl
    - aspell
SetupOptions: '-q -n %{name}-%{version}/upstream'
#NoSetup: true
Macros:
  - 'alpinedir;.local/share/%{name}'
  - 'smimedir;.local/share/%{name}/smime'
  - 'cachedir;.cache/%{name}'
ConfigOptions:
    - '--with-ssl'
    - '--with-ipv6'
    - '--with-pthread'
    - '--disable-debug'
    - '--disable-nls'
    - '--disable-mouse'
    - '--disable-keyboard-lock'
    - '--without-ldap'
    - '--without-krb5'
    - '--without-tcl'
    - '--without-ntlm'
    - '--with-bundled-tools=mailutil,dmail'
    - '--enable-from-encoding'
    - '--with-passfile=%{alpinedir}/.passfile'
    - '--with-interactive-spellcheck=/usr/bin/aspell'
    - '--with-default-mail-directory=%{alpinedir}/mail'
    - '--with-default-addressbook=%{alpinedir}/addressbook'
    - '--with-default-signature-file=%{alpinedir}/signature'
    - '--with-smime-public-cert-directory=%{smimedir}/public'
    - '--with-smime-private-key-directory=%{smimedir}/private'
    - '--with-smime-cacert-directory=%{smimedir}/ca'
    - '--with-default-html-directory=%{cachedir}/html'
    - '--with-local-support-info="%{_datadir}"/%{name}/pine.info'
    - '--with-system-pinerc="%{_datadir}"/%{name}/pine.conf'
    - '--with-system-fixed-pinerc="%{_datadir}"/%{name}/pine.conf.fixed'
    - '--with-encryption-minimum-version=tls1_1'
Files:
  - '%{_bindir}/%{name}'
  - '%config %{_datadir}/%{name}/pine.conf'
  - '%config %{_datadir}/%{name}/pine.conf.fixed'
  - '%ghost %config %{_sysconfdir}/c-client.conf'

SubPackages:
    - Name:  doc
      Summary: Documentation for %{name}
      Group: Documentation
      AutoDepend: false
      BuildArch: noarch
      Files:
        - '%doc README NOTICE'
        - '%doc doc/brochure.txt'
        - '%doc doc/tech-notes/*'
        - '%doc doc/mailcap.unx'
        - '%doc doc/mime.types'
        - '%{_mandir}/man1/*'

    - Name: pico
      AsWholeName: true
      Summary: The pico text editor
      Group: Applications
      AutoDepend: false
      Files:
        - '%{_bindir}/pico'

    - Name: pilot
      AsWholeName: true
      Summary: The pilot file manager
      Group: Applications
      AutoDepend: false
      Files:
        - '%{_bindir}/pilot'

    - Name: tools
      Summary: Extra binaries for %{name}
      Group: Applications
      AutoDepend: false
      Files:
        - '%{_bindir}/rpdump'
        - '%{_bindir}/rpload'
        - '%{_bindir}/mailutil'
        - '%{_bindir}/dmail'
